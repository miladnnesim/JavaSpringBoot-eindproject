<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
  <head th:fragment="header-links">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css"
    />
    <link rel="stylesheet" th:href="@{/css/style.css}" />

    <style>
      .cart-badge {
        position: absolute;
        top: -5px;      /* Positionering boven het icoon */
        right: -5px;    /* Positionering rechts van het icoon */
        background-color: #ff3b30; /* Rood */
        color: white;
        font-size: 0.75rem;
        font-weight: bold;
        padding: 2px 6px;
        border-radius: 50%;
        border: 2px solid white;
        line-height: 1;
        display: inline-block;
      }
      .navbar {
        backdrop-filter: blur(10px);
      }
      .nav-link {
        font-weight: 500;
        color: #444 !important;
        transition: color 0.2s ease;
      }
      .nav-link:hover {
        color: #0d6efd !important;
      }
      .cart-icon {
        font-size: 1.3rem;
        position: relative;
        color: #333;
      }
      .logout-btn {

      }
    </style>
  </head>
  <body>
    <nav
      th:fragment="navbar"
      class="navbar navbar-expand-lg navbar-light bg-white border-bottom sticky-top py-2"
    >
      <div class="container">
        <a
          class="navbar-brand fw-bold d-flex align-items-center"
          href="/home"
        >
          <span class="text-primary me-1"
            ><i class="bi bi-box-seam-fill"></i
          ></span>
          RentalApp
        </a>

        <button
          class="navbar-toggler border-0"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <a class="nav-link px-3" href="/catalogus">Catalogus</a>
            </li>
          </ul>

          <div class="navbar-nav align-items-lg-center">
            <div sec:authorize="isAnonymous()" class="d-flex gap-2">
              <a href="/login" class="nav-link">Inloggen</a>
              <a href="/register" class="btn btn-dark btn-sm rounded-pill px-4"
                >Registreren</a
              >
            </div>

            <div
              sec:authorize="isAuthenticated()"
              class="d-flex align-items-center"
            >
              <a href="/winkelmandje" class="nav-link px-3 cart-icon" title="Mijn Mandje">
                <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" class="bi bi-cart" viewBox="0 0 16 16">
                  <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l1.313 7h8.17l1.313-7zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
                </svg>

                <span class="cart-badge"
                      th:if="${cartCount > 0}"
                      th:text="${cartCount}">
        0
    </span>
              </a>

              <div
                class="d-flex align-items-center ms-lg-4 ps-lg-4 border-start"
              >
                <span class="small text-muted me-3 d-none d-md-block">
                                    <a class="nav-link px-3" href="/mijn-reservaties">
                  <i class="bi bi-person-circle me-1"></i>
                  <span sec:authentication="name" class="fw-semibold text-dark"
                  >Gebruiker</span
                  >
                    </a>
                </span>

                <form th:action="@{/logout}" method="post" class="m-0">
                  <button
                    type="submit"
                    class="btn btn-outline-danger btn-sm logout-btn rounded-pill px-3"
                  >
                    <i class="bi bi-box-arrow-right me-1"></i> Uitloggen
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
